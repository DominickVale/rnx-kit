"use strict";(self.webpackChunk_rnx_kit_docsite=self.webpackChunk_rnx_kit_docsite||[]).push([[6503],{517:(e,n,a)=>{a.d(n,{Z:()=>i});var t=a(7378);function i(e){let{children:n,hidden:a,className:i}=e;return t.createElement("div",{role:"tabpanel",hidden:a,className:i},n)}},637:(e,n,a)=>{a.d(n,{Z:()=>d});var t=a(5773),i=a(7378),o=a(6457),r=a(6769),s=a(8944);const p="tabItem_WhCL";function l(e){var n,a,o;const{lazy:l,block:d,defaultValue:c,values:m,groupId:u,className:k}=e,g=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),h=null!=m?m:g.map((e=>{let{props:{value:n,label:a,attributes:t}}=e;return{value:n,label:a,attributes:t}})),v=(0,r.lx)(h,((e,n)=>e.value===n.value));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const y=null===c?c:null!=(n=null!=c?c:null==(a=g.find((e=>e.props.default)))?void 0:a.props.value)?n:null==(o=g[0])?void 0:o.props.value;if(null!==y&&!h.some((e=>e.value===y)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+h.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:f,setTabGroupChoices:N}=(0,r.UB)(),[b,x]=(0,i.useState)(y),w=[],{blockElementScrollPositionUntilNextRender:T}=(0,r.o5)();if(null!=u){const e=f[u];null!=e&&e!==b&&h.some((n=>n.value===e))&&x(e)}const C=e=>{const n=e.currentTarget,a=w.indexOf(n),t=h[a].value;t!==b&&(T(n),x(t),null!=u&&N(u,t))},R=e=>{var n;let a=null;switch(e.key){case"ArrowRight":{const n=w.indexOf(e.currentTarget)+1;a=w[n]||w[0];break}case"ArrowLeft":{const n=w.indexOf(e.currentTarget)-1;a=w[n]||w[w.length-1];break}}null==(n=a)||n.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":d},k)},h.map((e=>{let{value:n,label:a,attributes:o}=e;return i.createElement("li",(0,t.Z)({role:"tab",tabIndex:b===n?0:-1,"aria-selected":b===n,key:n,ref:e=>w.push(e),onKeyDown:R,onFocus:C,onClick:C},o,{className:(0,s.Z)("tabs__item",p,null==o?void 0:o.className,{"tabs__item--active":b===n})}),null!=a?a:n)}))),l?(0,i.cloneElement)(g.filter((e=>e.props.value===b))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},g.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==b})))))}function d(e){const n=(0,o.Z)();return i.createElement(l,(0,t.Z)({key:String(n)},e))}},3842:(e,n,a)=>{a.d(n,{ZP:()=>r});var t=a(5773),i=(a(7378),a(5318));const o={toc:[]};function r(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},o,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Was this helpful? Spread the word on ",(0,i.kt)("a",{parentName:"p",href:"https://twitter.com"},"Twitter"),":\n",(0,i.kt)("inlineCode",{parentName:"p"},"@ReactNativeMSFT")," ",(0,i.kt)("inlineCode",{parentName:"p"},"#rnxkit")))}r.isMDXComponent=!0},7300:(e,n,a)=>{a.d(n,{ZP:()=>p});var t=a(5773),i=(a(7378),a(5318)),o=a(637),r=a(517);const s={toc:[]};function p(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)(o.Z,{groupId:"package-manager",mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"yarn",label:"Yarn",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn rnx-dep-check --init app\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn rnx-dep-check --init library\n"))),(0,i.kt)(r.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"pnpm rnx-dep-check --init app\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"pnpm rnx-dep-check --init library\n"))),(0,i.kt)(r.Z,{value:"npm",label:"npm",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"npx rnx-dep-check --init app\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"npx rnx-dep-check --init library\n")))))}p.isMDXComponent=!0},1266:(e,n,a)=>{a.d(n,{ZP:()=>l});var t=a(5773),i=(a(7378),a(5318)),o=a(637),r=a(517),s=a(1789);const p={toc:[]};function l(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)(o.Z,{groupId:"package-manager",mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"yarn",label:"Yarn",default:!0,mdxType:"TabItem"},(0,i.kt)(s.Z,{language:"sh",mdxType:"CodeBlock"},"yarn ",a.yarnArgs||a.args)),(0,i.kt)(r.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,i.kt)(s.Z,{language:"sh",mdxType:"CodeBlock"},"pnpm ",a.pnpmArgs||a.args)),(0,i.kt)(r.Z,{value:"npm",label:"npm",mdxType:"TabItem"},(0,i.kt)(s.Z,{language:"sh",mdxType:"CodeBlock"},"npm ",a.npmArgs||a.args))))}l.isMDXComponent=!0},4597:(e,n,a)=>{a.d(n,{ZP:()=>l});var t=a(5773),i=(a(7378),a(5318)),o=a(637),r=a(517),s=a(1789);const p={toc:[]};function l(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)(o.Z,{groupId:"package-manager",mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"yarn",label:"Yarn",default:!0,mdxType:"TabItem"},(0,i.kt)(s.Z,{language:"sh",mdxType:"CodeBlock"},"yarn ",a.yarnArgs||a.args)),(0,i.kt)(r.Z,{value:"pnpm",label:"pnpm",mdxType:"TabItem"},(0,i.kt)(s.Z,{language:"sh",mdxType:"CodeBlock"},"pnpm ",a.pnpmArgs||a.args)),(0,i.kt)(r.Z,{value:"npm",label:"npm",mdxType:"TabItem"},(0,i.kt)(s.Z,{language:"sh",mdxType:"CodeBlock"},"npx ",a.npxArgs||a.args))))}l.isMDXComponent=!0},8644:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>d,default:()=>g,frontMatter:()=>l,metadata:()=>c,toc:()=>u});var t=a(5773),i=(a(7378),a(5318)),o=a(7300),r=a(1266),s=a(4597),p=a(3842);const l={},d="Dependency Management",c={unversionedId:"guides/dependency-management",id:"guides/dependency-management",title:"Dependency Management",description:"Ready for some magic? This guide will fundamentally change the way you maintain",source:"@site/docs/guides/dependency-management.mdx",sourceDirName:"guides",slug:"/guides/dependency-management",permalink:"/rnx-kit/docs/guides/dependency-management",editUrl:"https://github.com/microsoft/rnx-kit/tree/main/docsite/docs/guides/dependency-management.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Getting Started",permalink:"/rnx-kit/docs/guides/getting-started"},next:{title:"Bundling",permalink:"/rnx-kit/docs/guides/bundling"}},m={},u=[{value:"Onboarding",id:"onboarding",level:2},{value:"Automating Everything",id:"automating-everything",level:2},{value:"Builds",id:"builds",level:3},{value:"Pull Requests",id:"pull-requests",level:3},{value:"Dependency Manager Updates",id:"dependency-manager-updates",level:3},{value:"Upgrading React Native",id:"upgrading-react-native",level:2},{value:"Customization",id:"customization",level:2},{value:"Finish Line",id:"finish-line",level:2}],k={toc:u};function g(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},k,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"dependency-management"},"Dependency Management"),(0,i.kt)("p",null,"Ready for some magic? This guide will fundamentally change the way you maintain\nyour React Native applications and libraries. It all centers on one tool -- the\ndependency manager."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Not quite ready to make the leap? Learn more about\n",(0,i.kt)("a",{parentName:"p",href:"/docs/dependencies"},"dependencies")," first."))),(0,i.kt)("h2",{id:"onboarding"},"Onboarding"),(0,i.kt)("p",null,"The first order of business is onboarding your React Native packages to the\ndependency manager. Do this for every React Native package you have. It can be\ndone all at once, or gradually over multiple PRs."),(0,i.kt)("p",null,"First, add the dependency manager to your package."),(0,i.kt)(r.ZP,{yarnArgs:"add @rnx-kit/dep-check --dev",pnpmArgs:"add -D @rnx-kit/dep-check",npmArgs:"add --save-dev @rnx-kit/dep-check",mdxType:"PackageCommand"}),(0,i.kt)("p",null,"Add new script commands for convenience. We'll use these later."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "scripts": {\n    "check-dependencies": "rnx-dep-check",\n    "fix-dependencies": "rnx-dep-check --write"\n  }\n}\n')),(0,i.kt)("p",null,"Next, generate the dependency manager configuration for your package. If your\npackage produces a bundle, it's an ",(0,i.kt)("inlineCode",{parentName:"p"},"app"),". Otherwise, it's a ",(0,i.kt)("inlineCode",{parentName:"p"},"library"),"."),(0,i.kt)(o.ZP,{mdxType:"DepCheckInit"}),(0,i.kt)("p",null,"Fix any React Native package versions that might have compatibility issues."),(0,i.kt)(s.ZP,{args:"fix-dependencies",mdxType:"PackageRunCommand"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Review")," and ",(0,i.kt)("strong",{parentName:"p"},"test")," your changes before committing. This is important, even\nfor seemingly harmless updates."),(0,i.kt)("h2",{id:"automating-everything"},"Automating Everything"),(0,i.kt)("p",null,"Once onboarding is done, you're ready to set up automation."),(0,i.kt)("p",null,"Automation validates your React Native dependencies during builds and PRs. It\nalso keeps the dependency manager up-to-date, including the built-in list of\nknown/good React Native package versions and releases. This list can change\nfrequently, based on the volatility of the React Native ecosystem."),(0,i.kt)("h3",{id:"builds"},"Builds"),(0,i.kt)("p",null,"To validate dependencies during a build, you'll integrate the\n",(0,i.kt)("inlineCode",{parentName:"p"},"check-dependencies")," command into your build workflow."),(0,i.kt)("p",null,"In each of your React Native packages, add it to the ",(0,i.kt)("inlineCode",{parentName:"p"},"build")," command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "scripts": {\n    "build": "... existing-stuff ... && yarn fix-dependencies"\n  }\n}\n')),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Replace ",(0,i.kt)("inlineCode",{parentName:"em"},"yarn")," with ",(0,i.kt)("inlineCode",{parentName:"em"},"npm run")," or ",(0,i.kt)("inlineCode",{parentName:"em"},"pnpm"),", depending on your package manager.")),(0,i.kt)("p",null,"When the validation process finds a compatibility problem, it fails with a\ndetailed message, showing you what went wrong before you commit to the repo."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Using a Task Runner?")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If you're using a task runner like Lage or Gulp, you can go for a more\nsophisticated integration. The advantage being that ",(0,i.kt)("inlineCode",{parentName:"p"},"fix-dependencies")," could run\nas its own task with isolated logging and error handling. And, you can run it in\nparallel with other tasks."))),(0,i.kt)("h3",{id:"pull-requests"},"Pull Requests"),(0,i.kt)("p",null,"To validate dependencies during PRs, you'll use the dependency manager to check\nevery package in your repo."),(0,i.kt)("p",null,"Add the dependency manager to your repo's root package.json."),(0,i.kt)(r.ZP,{yarnArgs:"add @rnx-kit/dep-check --dev -W",pnpmArgs:"add -D @rnx-kit/dep-check",npmArgs:"add --save-dev @rnx-kit/dep-check",mdxType:"PackageCommand"}),(0,i.kt)("p",null,"Next, add this command to your PR loop. It runs the dependency manager from the\nroot of the repo, scanning all packages. This include packages which haven't\nonboarded yet. For those, ",(0,i.kt)("inlineCode",{parentName:"p"},"--vigilant [version]")," controls the target React\nNative release to use when checking compatibility."),(0,i.kt)(s.ZP,{args:"rnx-dep-check --vigilant 0.66",mdxType:"PackageRunCommand"}),(0,i.kt)("p",null,"When a compatibility problem is found, the command fails with a non-zero exit\ncode, which causes the PR loop to fail. This protects the repo from risky\nchanges."),(0,i.kt)("p",null,"In the PR logs, you'll see a detailed report, in ",(0,i.kt)("inlineCode",{parentName:"p"},"diff")," format, explaining what\nwent wrong."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff"},'error Found 3 violation(s) in @rnts/app:\n    react-native "^0.66.0" -> "^0.66.0-0" (dependencies)\n    react-native-macos "^0.66.0" -> "^0.66.0-0" (dependencies)\n    react-native-windows "^0.66.0" -> "^0.66.0-0" (dependencies)\n- Current\n+ Expected\n\n  {\n    "name": "@rnts/button",\n    "version": "0.0.1",\n    "private": true,\n    "license": "MIT",\n    "main": "src/index.ts",\n    "typings": "lib/index.d.ts",\n    "scripts": {\n      "clean": "rimraf ./lib",\n      "build": "yarn run clean && yarn run tsc && yarn run api-extract",\n      "api-extract": "api-extractor run --local --verbose"\n    },\n    "devDependencies": {\n      "@microsoft/api-extractor": "^7.19.4",\n      "@office-iss/react-native-win32": "^0.66.0",\n      "@rnx-kit/dep-check": "^1.12.9",\n      "@types/react-native": "^0.66.0",\n-     "rimraf": "^3.0.2",\n      "react": "17.0.2",\n-     "react-native": "^0.66.0",\n-     "react-native-macos": "^0.66.0",\n-     "react-native-windows": "^0.66.0",\n+     "react-native": "^0.66.0-0",\n+     "react-native-macos": "^0.66.0-0",\n+     "react-native-windows": "^0.66.0-0",\n+     "rimraf": "^3.0.2",\n      "typescript": "^4.5.5"\n    },\n    "rnx-kit": {\n      "reactNativeVersion": "^0.66",\n      "reactNativeDevVersion": "^0.66.0",\n      "kitType": "library",\n      "capabilities": [\n        "core",\n        "core-android",\n        "core-ios",\n        "core-macos",\n        "core-windows",\n        "react"\n      ]\n+   },\n+   "peerDependencies": {\n+     "react": "17.0.2",\n+     "react-native": "^0.66.0-0",\n+     "react-native-macos": "^0.66.0-0",\n+     "react-native-windows": "^0.66.0-0"\n    }\n  }\nerror Changes are needed to satisfy all requirements. Re-run with `--write` to have dep-check apply them.\ninfo Visit https://aka.ms/dep-check for more information about dep-check.\nerror Command failed with exit code 1.\ninfo Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.\n')),(0,i.kt)("p",null,"Fixing problems is automated, too! From your development terminal, run the same\ncommand with a ",(0,i.kt)("inlineCode",{parentName:"p"},"--write")," parameter."),(0,i.kt)(s.ZP,{args:"rnx-dep-check --vigilant 0.66 --write",mdxType:"PackageRunCommand"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Review")," and ",(0,i.kt)("strong",{parentName:"p"},"test")," the fixes before pushing them to your PR."),(0,i.kt)("h3",{id:"dependency-manager-updates"},"Dependency Manager Updates"),(0,i.kt)("p",null,"The dependency manager comes with a\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rnx-kit/tree/main/packages/dep-check#capabilities"},"built-in list"),"\nof known/good React Native package versions and releases. Keeping the dependency\nmanager up-to-date gives you the latest compatibility data."),(0,i.kt)("p",null,"If you are in GitHub, use Dependabot to keep your packages up-to-date, including\nthe dependency manager. If you host your repo elsewhere, you can use tools like\nSnyk instead."),(0,i.kt)("p",null,"When a dependency manager update happens, the associated PR loop may fail with\nincompatible package errors. This is OK. It means the built-in list of React\nNative package versions has changed, and you need to update your packages in\nresponse."),(0,i.kt)("p",null,"Run this command from the root of your repo. It uses the dependency manager to\nmake the fixes automatically."),(0,i.kt)(s.ZP,{args:"rnx-dep-check --write",mdxType:"PackageRunCommand"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Review")," and ",(0,i.kt)("strong",{parentName:"p"},"test")," the fixes before pushing them to the PR with the\ndependency manager update."),(0,i.kt)("h2",{id:"upgrading-react-native"},"Upgrading React Native"),(0,i.kt)("p",null,"When you're ready to upgrade to a new release of React Native (or downgrade to\nan old release), you can use the dependency manager to help you out."),(0,i.kt)("p",null,"First, update your PR loop definition. Find the\n",(0,i.kt)("inlineCode",{parentName:"p"},"rnx-dep-check --vigilant [version]")," command and change the target React Native\nversion."),(0,i.kt)("p",null,"Then, run these commands from the root of your repo to change your React Native\nversion and adjust all React Native dependencies to be compatible. Replace\n",(0,i.kt)("inlineCode",{parentName:"p"},"[version]")," with your target React Native version in ",(0,i.kt)("inlineCode",{parentName:"p"},"major.minor"),' format, such\nas "0.66" or "0.68".'),(0,i.kt)(s.ZP,{args:"rnx-dep-check --set-version [version]",mdxType:"PackageRunCommand"}),(0,i.kt)(s.ZP,{args:"rnx-dep-check --vigilant [version] --write",mdxType:"PackageRunCommand"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Review")," and ",(0,i.kt)("strong",{parentName:"p"},"test")," your packages thoroughly before merging these changes."),(0,i.kt)("h2",{id:"customization"},"Customization"),(0,i.kt)("p",null,"Did you know that you can add your own packages to the dependency manager's\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rnx-kit/tree/main/packages/dep-check#capabilities"},"built-in list"),"?"),(0,i.kt)("p",null,"If your repo uses React Native packages that aren't known to the dependency\nmanager, add them to the list! Or if you want to align other dependencies\nautomatically, add them to the list too!"),(0,i.kt)("p",null,"First, write the list of packages you want to manage. Each one is expressed as a\n",(0,i.kt)("a",{parentName:"p",href:"/docs/dependencies#capabilities-and-profiles"},"capability"),". You can use a ",(0,i.kt)("inlineCode",{parentName:"p"},".js"),"\nmodule, a ",(0,i.kt)("inlineCode",{parentName:"p"},".json")," file, or a module name."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="dependency-profile.json"',title:'"dependency-profile.json"'},'{\n  "@types/node": {\n    "name": "@types/node",\n    "version": "^16.0.0",\n    "devOnly": true\n  },\n  "chalk": {\n    "name": "chalk",\n    "version": "^4.1.0"\n  },\n  "0.63": {\n    "native-base": {\n      "name": "native-base",\n      "version": "^3.3.11",\n      "capabilities": ["react"]\n    }\n  }\n}\n')),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Look at ",(0,i.kt)("inlineCode",{parentName:"p"},"native-base")," in the example above. It's wrapped in a ",(0,i.kt)("inlineCode",{parentName:"p"},"0.63")," version\ntag. That means it only applies to React Native 0.63 and above."))),(0,i.kt)("p",null,"Next, configure each of your onboarded React Native packages to use the list."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "rnx-kit": {\n    "customProfiles": "path/to/dependency-profile.json"\n  }\n}\n')),(0,i.kt)("p",null,"Now its time to use the list. Run the dependency manager to update all of your\npackages."),(0,i.kt)(s.ZP,{args:"rnx-dep-check --vigilant 0.66 --customProfiles path/to/dependency-profile.json --write",mdxType:"PackageRunCommand"}),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Review")," and ",(0,i.kt)("strong",{parentName:"p"},"test")," the changes before continuing."),(0,i.kt)("p",null,"The last step is updating the automation. Each command needs an extra\n",(0,i.kt)("inlineCode",{parentName:"p"},"--customProfiles [path]")," parameter."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Pull Requests: Change the ",(0,i.kt)("inlineCode",{parentName:"li"},"rnx-dep-check --vigilant [version]")," command"),(0,i.kt)("li",{parentName:"ul"},"Dependency Manager Updates: Change the ",(0,i.kt)("inlineCode",{parentName:"li"},"rnx-dep-check --write")," command"),(0,i.kt)("li",{parentName:"ul"},"Upgrading React Native: Change the\n",(0,i.kt)("inlineCode",{parentName:"li"},"rnx-dep-check --vigilant [version] --write")," command")),(0,i.kt)("h2",{id:"finish-line"},"Finish Line"),(0,i.kt)("p",null,"Congratulations! Your React Native apps and libraries are now up-to-date and\ncompatible with each other! And they should stay that way thanks to the\nautomation you've put in place!"),(0,i.kt)(p.ZP,{mdxType:"AmplifyCallout"}),(0,i.kt)("p",null,"And, if you customized your list of dependencies, please consider\n",(0,i.kt)("a",{parentName:"p",href:"/docs/contributing"},"contributing")," your work so that everyone can use it\n(including you). You can\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rnx-kit/issues/new?title=Dependency%20Manager%20Customizations&body=%3c%21--%20Please%20add%20your%20custom%20dependency%20list%20here.%20--%3e%0a%0a"},"create an ",(0,i.kt)("strong",{parentName:"a"},"issue")," with your customizations"),"\nor even ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/microsoft/rnx-kit/pulls"},"submit a ",(0,i.kt)("strong",{parentName:"a"},"pull request")),"."))}g.isMDXComponent=!0}}]);