"use strict";(self.webpackChunk_rnx_kit_docsite=self.webpackChunk_rnx_kit_docsite||[]).push([[829],{5318:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>f});var o=t(7378);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),d=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=d(e.components);return o.createElement(s.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},p=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(t),f=r,m=p["".concat(s,".").concat(f)]||p[f]||c[f]||a;return t?o.createElement(m,i(i({ref:n},u),{},{components:t})):o.createElement(m,i({ref:n},u))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=p;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<a;d++)i[d]=t[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2475:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var o=t(5773),r=(t(7378),t(5318));const a={},i="bundle-diff",l={unversionedId:"tools/bundle-diff",id:"tools/bundle-diff",title:"bundle-diff",description:"",source:"@site/docs/tools/bundle-diff.mdx",sourceDirName:"tools",slug:"/tools/bundle-diff",permalink:"/rnx-kit/docs/tools/bundle-diff",editUrl:"https://github.com/microsoft/rnx-kit/tree/main/docsite/docs/tools/bundle-diff.mdx",tags:[],version:"current",frontMatter:{},sidebar:"toolsSidebar",previous:{title:"babel-preset-metro-react-native",permalink:"/rnx-kit/docs/tools/babel-preset-metro-react-native"},next:{title:"cli",permalink:"/rnx-kit/docs/tools/cli"}},s={},d=[{value:"Usage",id:"usage",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"I have a lot of unknown content sizes in my diff",id:"i-have-a-lot-of-unknown-content-sizes-in-my-diff",level:3},{value:"I have a lot of relative paths in my source map",id:"i-have-a-lot-of-relative-paths-in-my-source-map",level:3}],u={toc:d};function c(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"bundle-diff"},"bundle-diff"),(0,r.kt)("p",null,"A simple tool for diffing two bundles. Useful for getting an overview of which\nfiles are included in one bundle but not the other. For example, comparing a\nbundle produced by Webpack vs. one produced by Metro."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"rnx-bundle-diff <a.jsbundle.map> <b.jsbundle.map>\n")),(0,r.kt)("p",null,"Example output:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"     +106    added  /~/node_modules/@babel/runtime/helpers/arrayWithHoles.js\n      +96    added  /~/node_modules/lodash-es/_realNames.js\n      +49    added  /~/node_modules/@babel/runtime/regenerator/index.js\n       +1  changed  /~/node_modules/react/index.js\n     -127  removed  /~/node_modules/querystring-es3/index.js\n     -286  removed  /~/node_modules/react-native/Libraries/Components/Picker/PickerAndroid.ios.js\n     -592  removed  /~/node_modules/react-native/Libraries/Components/Sound/SoundManager.js\n  unknown    added  /~/packages/awesome-app/lib/index.js\n")),(0,r.kt)("p",null,"Note that the numbers are in bytes, and based on the unminified code. They are\nmeant to give an idea of how big the file is, but could differ wildly depending\non a number of factors, including Babel plugins, Wepback config, TypeScript\ncompilation options, indentation etc."),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("h3",{id:"i-have-a-lot-of-unknown-content-sizes-in-my-diff"},"I have a lot of unknown content sizes in my diff"),(0,r.kt)("p",null,"If you're using TypeScript, you need to tell ",(0,r.kt)("inlineCode",{parentName:"p"},"tsc")," to also include source\ncontent in the source map:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'// tsconfig.json\n{\n  "compilerOptions": {\n    "inlineSources": true\n  }\n}\n')),(0,r.kt)("h3",{id:"i-have-a-lot-of-relative-paths-in-my-source-map"},"I have a lot of relative paths in my source map"),(0,r.kt)("p",null,"If your project is using TypeScript and Webpack, you may experience that your\nsource maps don't properly map back to the source file. Try using\n",(0,r.kt)("a",{parentName:"p",href:"https://webpack.js.org/loaders/source-map-loader/"},(0,r.kt)("inlineCode",{parentName:"a"},"source-map-loader"))," to\nclean up the paths:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// webpack.config.js\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(js|(js)?bundle)($|\\?)/i,\n        enforce: "pre",\n        use: ["source-map-loader"],\n      },\n    ],\n  },\n};\n')))}c.isMDXComponent=!0}}]);